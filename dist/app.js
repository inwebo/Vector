!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(t){this._bounds=t,this._emitters=[],this._dampers=[],this._maxParticles=0,this._particles=[],this._pps=60}getEmitters(){return this._emitters}getDampers(){return this._dampers}getParticles(){return this._particles}setMaxParticles(){this._maxParticles=0,this._emitters.forEach(t=>{this._maxParticles+=t.getMaxParticles()})}pushEmitter(t){this._emitters.push(t),this.setMaxParticles()}pushDamper(t){this._dampers.push(t)}inBounds(t){return this._bounds.inBounds(t.getOrigin())}pushParticle(t){this._particles.push(t)}garbageCollector(){let t=[];this._particles.forEach(e=>{!1===this.inBounds(e)&&t.push(e)}),this._particles=this._particles.filter(e=>!t.includes(e))}step(t){this.garbageCollector(),this.emit(t),this.dampers(),this.move(),this.garbageCollector()}dampers(){this._dampers.forEach(t=>{this._particles.forEach(e=>{t.getForce(e)})})}emit(t){this._emitters.forEach(e=>{if(e.getTicker().isTicking(t)){const i=e.emit();this.pushParticle(i),e.getTicker().step(t)}})}move(){this._particles.forEach(t=>{t.move()})}}class r{constructor(t,e){this._min=t,this._max=e}inBounds(t){return t.getX()<this._max.getX()&&t.getX()>this._min.getX()&&t.getY()<this._max.getY()&&t.getY()>this._min.getY()}}class n{getX(){return this._x}setX(t){this._x=t}getY(){return this._y}setY(t){this._y=t}constructor(t,e){this._x=t,this._y=e}getMagnitude(){return Math.sqrt(this._x*this._x+this._y*this._y)}add(t){this._x+=t.getX(),this._y+=t.getY()}getAngle(){return Math.atan2(this._y,this._x)}static fromAngle(t,e){return new n(e*Math.cos(t),e*Math.sin(t))}static getCartesianDistance(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))}static getEuclideanlDistance(t,e){return new n(t.getX()-t.getX(),e.getY()-e.getY())}}class a{constructor(t,e){this._canvas=t,this._ctx=t.getContext("2d"),this._simulation=e,this._particleRenderer=null,this.setDefaultParticleRenderer(),this.setOrigin()}getContext(){return this._ctx}setOrigin(){this._ctx.translate(0,this._canvas.height),this._ctx.scale(1,-1)}clear(){this._ctx.save(),this._ctx.fillStyle="whitesmoke",this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height),this._ctx.restore()}setParticleRenderer(t){this._particleRenderer=t}setDefaultParticleRenderer(){this._particleRenderer=t=>{this.getContext().save(),this.getContext().beginPath(),this.getContext().arc(t.getOrigin().getX(),t.getOrigin().getY(),10,0,2*Math.PI,!1);const e=t.getPercentLife();this.getContext().fillStyle=`rgba(0,0,0,${e}`,this.getContext().fill(),this.getContext().restore()}}draw(){this.clear(),this.drawParticles()}drawParticles(){this._simulation.getParticles().forEach(t=>{this._particleRenderer(t)})}}class h{constructor(t){this._interval=t,this._now=Date.now(),this._ticks=0,this.setNextTick()}setNextTick(){this._nextTick=this._now+this._interval}setNow(t){this._now=t}step(t){this.isTicking(t)&&(this._ticks++,this.setNow(t),this.setNextTick())}isTicking(t){return t>this._nextTick}}class c{constructor(t=null,e=null,i=null,s=null){this._origin=t||new n(0,0),this._velocity=e||new n(0,0),this._acceleration=i||new n(0,0),this._lifeTime=s||-1,this._birth=Date.now(),this._death=-1===this._lifeTime?-1:this._birth+this._lifeTime}getPercentLife(){return this.isPerpetual()?1:(this._death-Date.now())/this._lifeTime*100}getOrigin(){return this._origin}setPosition(t){this._origin=t}setAcceleration(t){this._acceleration=t}isPerpetual(){return-1===this._lifeTime}isAlive(t){return!!this.isPerpetual()||this._death>t}stop(){this._velocity=new n(0,0),this._acceleration=new n(0,0)}move(){this._velocity.add(this._acceleration),this._origin.add(this._velocity)}}class o{constructor(t,e,i,s,r=-1,n=0,a=1,c=60){this._origin=t,this._initialVelocity=e,this._spreadAngle=n,this._spreadOrientation=s||Math.PI/32,this._maxParticles=i,this._pps=a,this._particleLifeTime=r,this._fps=c,this._ticker=new h(this.getEmitInterval())}getMaxParticles(){return this._maxParticles}getEmitInterval(){return 1e3/this._pps}getFrameDuration(){return 1/this._fps*1e3}getTicker(){return this._ticker}getParticlesByFrame(){return Math.floor(this.getFrameDuration()/this.getEmitInterval())}setOrigin(t){this._origin=t}emit(){const t=Math.degreesToRadians(this._spreadOrientation),e=this._initialVelocity.getAngle()+t+(this._spreadAngle-Math.random()*this._spreadAngle*4),i=this._initialVelocity.getMagnitude(),s=n.fromAngle(e,i);return new c(new n(this._origin.getX(),this._origin.getY()),s,null,this._particleLifeTime)}}class l{constructor(t=null,e=null){this._origin=t||new n(0,0),this._mass=e||5}getForce(t){const e=n.getEuclideanlDistance(new n(this._origin.getX(),this._origin.getY()),new n(t.getOrigin().getX(),t.getOrigin().getY()));console.log(e);const i=this._mass/Math.pow(Math.pow(e.getX(),2)+Math.pow(e.getY,2),1.5);Math.pow(e.getX(),2);return new n(e.getX()*i,e.getY()*i)}}document.addEventListener("DOMContentLoaded",(function(){const t=new r(new n(0,0),new n(600,600)),e=new s(t),i=document.getElementById("demo"),h=new a(i,e),c=new o(new n(300,300),new n(2,2),500,0,-1),_=new l(new n(300,450),10);e.pushEmitter(c),e.pushDamper(_);const g=function(){setTimeout(()=>{const t=Date.now();e.step(t),h.draw(),requestAnimationFrame(g)},10)};requestAnimationFrame(g)}))}]);